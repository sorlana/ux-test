name: ðŸš€ Deploy to Beget

on:
  push:
    branches: [ master ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: ðŸ”§ Install lftp
      run: sudo apt-get update && sudo apt-get install -y lftp

    - name: ðŸ“‚ Upload files with lftp
      run: |
        lftp -e "
          set ftp:ssl-force true;
          set ssl:verify-certificate false;
          set cmd:fail-exit true;
          open -u ${{ secrets.FTP_USERNAME }},${{ secrets.FTP_PASSWORD }} ftps://${{ secrets.FTP_SERVER }};
          mirror -R -v --parallel=10 ./ /uxtest/;
          bye
        "
